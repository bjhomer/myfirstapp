<!DOCTYPE html>
<html>
<head>

<link type="text/css" rel="stylesheet" href="styles.css"

<!-- StackMob JS SDK Javascript Dependencies -->
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script type="text/javascript" src="http://static.stackmob.com/js/json2-min.js"></script>
<script type="text/javascript" src="http://static.stackmob.com/js/underscore-1.3.0-min.js"></script>
<script type="text/javascript" src="http://static.stackmob.com/js/backbone-0.5.3-min.js"></script>
<script type="text/javascript" src="http://static.stackmob.com/js/stackmob-js-0.2.1.js"></script>
 
<!-- Initialize the StackMob JS SDK -->
<script type="text/javascript">
  StackMob.init({
    appName: "myfirstapp",
    clientSubdomain: "bjhomer",
    apiVersion: 0
  });
</script>

</head>
<body>


<h1>Welcome</h1>

<div id="login-area" style="display:none">
<p>Please log in</p>

<form onsubmit="doLogin(); return false;" action="">
<input id='username-field' type="text" placeholder="email" /><br/>
<input id='password-field' type="password" placeholder="password"/>
<input class="button green" type="submit" value="Login!" />
</form>
</div>

<div id='logout-area' style="display:none">
<input class="button" type="button" value="Logout" onclick="doLogout();"/>

<!-- 
This is a simple template so that you can get started.  
It has all the JS libraries included for you already.  
You can also choose to use Zepto.js or Sencha's ExtJS in place of jQuery.  Simply replace the jQuery include.
-->

<script type="text/javascript">
/* Your code can go here */

function doLogin() {
	var username = document.getElementById('username-field').value;
	var pass = document.getElementById('password-field').value;
	
	var user = new StackMob.User({username: username, password: pass});
	
	user.login(false, {
		success: function(model) {
			document.getElementById('login-area').style.display = 'none';
			document.getElementById('logout-area').style.display = 'block';
		},
		error: function(model, response) {
			alert('login failed');
		}
	});
	return false;
}

function doLogout() {
	var username = StackMob.getLoggedInUser();
	var user = new StackMob.User({username:username});
	user.logout({
	    success: function (model) {
			document.getElementById('login-area').style.display = 'block';
			document.getElementById('logout-area').style.display = 'none';
	    }
	});
}

function checkLoggedIn() {
    var loggedIn = StackMob.isLoggedIn();
    if (loggedIn == false) {
        document.getElementById('login-area').style.display = 'block';
    }
    else {
        document.getElementById('logout-area').style.display = 'block';
    }
}
checkLoggedIn();
</script>


</body>
</html>